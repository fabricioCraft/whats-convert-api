# WhatsApp Media Converter API - Environment Template
# Copy this file to .env and customize for your environment

# =============================================================================
# üöÄ QUICK START CONFIGURATION
# =============================================================================

# Basic server settings
PORT=8080
APP_ENV=development
GOMEMLIMIT=1GiB

# Performance settings (auto-detect based on CPU)
MAX_WORKERS=0
BUFFER_POOL_SIZE=100

# =============================================================================
# üìä PERFORMANCE TUNING
# =============================================================================

# For DEVELOPMENT (4-core machine)
# MAX_WORKERS=16
# BUFFER_POOL_SIZE=50
# GOMEMLIMIT=1GiB

# For PRODUCTION (8+ core machine, 1000 req/s target)
# MAX_WORKERS=32
# BUFFER_POOL_SIZE=100
# GOMEMLIMIT=3GiB

# For HIGH-LOAD (16+ core machine, 2000+ req/s)
# MAX_WORKERS=64
# BUFFER_POOL_SIZE=200
# GOMEMLIMIT=4GiB

# =============================================================================
# üîß DETAILED CONFIGURATION
# =============================================================================

# Server Configuration
READ_TIMEOUT=5m
WRITE_TIMEOUT=5m
BODY_LIMIT=524288000

# Memory Management
BUFFER_SIZE=10485760
GOGC=100

# Request Processing
REQUEST_TIMEOUT=5m
DOWNLOAD_TIMEOUT=30s

# HTTP Client Pool
MAX_IDLE_CONNS=100
IDLE_CONN_TIMEOUT=90s

# Audio Settings
AUDIO_BITRATE=128k
MAX_AUDIO_SIZE=104857600

# Image Settings
DEFAULT_IMAGE_QUALITY=95
DEFAULT_MAX_WIDTH=1920
DEFAULT_MAX_HEIGHT=1920
MAX_IMAGE_SIZE=209715200

# Logging
LOG_LEVEL=info
ENABLE_PERFORMANCE_LOGS=true

# Features
ENABLE_HEALTH_CHECK=true
ENABLE_STATS_ENDPOINT=true
ENABLE_CORS=true

# Security (optional)
ENABLE_API_AUTH=false
API_KEY=
ENABLE_RATE_LIMITING=false
RATE_LIMIT=1000

# =============================================================================
# üì¶ S3 UPLOAD CONFIGURATION
# =============================================================================

# S3 Service Enable/Disable
S3_ENABLED=false

# === AWS S3 EXAMPLE ===
# S3_PROVIDER=aws
# S3_ENDPOINT=https://s3.amazonaws.com
# S3_PUBLIC_ENDPOINT=https://mybucket.s3.amazonaws.com
# S3_REGION=us-east-1
# S3_BUCKET=my-upload-bucket
# S3_ACCESS_KEY=AKIAIOSFODNN7EXAMPLE
# S3_SECRET_KEY=wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY

# === MinIO EXAMPLE ===
# S3_PROVIDER=minio
# S3_ENDPOINT=http://localhost:9000
# S3_PUBLIC_ENDPOINT=http://localhost:9000
# S3_REGION=us-east-1
# S3_BUCKET=uploads
# S3_ACCESS_KEY=minioadmin
# S3_SECRET_KEY=minioadmin123

# === Backblaze B2 EXAMPLE ===
# S3_PROVIDER=backblaze
# S3_ENDPOINT=https://s3.us-west-000.backblazeb2.com
# S3_PUBLIC_ENDPOINT=https://f000.backblazeb2.com/file/bucket-name
# S3_REGION=us-west-000
# S3_BUCKET=my-b2-bucket
# S3_ACCESS_KEY=000123456789abcdef
# S3_SECRET_KEY=K000secretKey

# S3 Upload Behavior
S3_PATH_STYLE=false
S3_PUBLIC_READ=true
S3_EXPIRATION_DAYS=0

# S3 Performance Settings
S3_MULTIPART_THRESHOLD=5242880
S3_CHUNK_SIZE=10485760
S3_MAX_CONCURRENT_UPLOADS=3
S3_UPLOAD_TIMEOUT=1h
S3_RETRY_COUNT=3

# S3 Key Generation
S3_KEY_PREFIX=uploads/
S3_USE_TIMESTAMP_IN_KEY=true
S3_USE_UUID_IN_KEY=true
S3_PRESERVE_FILENAME=true

# S3 Security (optional)
S3_ALLOWED_CONTENT_TYPES=
S3_MAX_FILE_SIZE=0
S3_SCAN_UPLOADS=false

# S3 Monitoring
S3_ENABLE_METRICS=true
S3_LOG_UPLOADS=true

# =============================================================================
# üê≥ DOCKER SETTINGS
# =============================================================================
CONTAINER_NAME=whats-media-converter
RESTART_POLICY=unless-stopped
USE_TMPFS=true
TMPFS_SIZE=2G